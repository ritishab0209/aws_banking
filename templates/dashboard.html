
{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h2 class="mb-4">Welcome, {{ customer.name }}</h2>

<div class="card p-4 shadow-sm mb-4">
<h5>Create New Account</h5>
<form method="POST" action="/create_account" class="row g-2">
    <div class="col-md-8">
        <input class="form-control" type="text" name="account_number" placeholder="Account Number" required>
    </div>
    <div class="col-md-4">
        <button class="btn btn-primary w-100">Create</button>
    </div>
</form>
</div>

<div class="row">
{% for account in customer.accounts %}
<div class="col-md-6 mb-4">
<div class="card shadow-sm">
<div class="card-body">
<h5 class="card-title">Account #{{ account.account_number }}</h5>
<h6 class="text-muted">Balance: ₹{{ account.balance }}</h6>

<form method="POST" action="/deposit/{{ account.id }}" class="mt-3">
<div class="input-group mb-2">
<input type="number" name="amount" class="form-control" placeholder="Deposit Amount" required>
<button class="btn btn-success">Deposit</button>
</div>
</form>

<form method="POST" action="/withdraw/{{ account.id }}">
<div class="input-group mb-2">
<input type="number" name="amount" class="form-control" placeholder="Withdraw Amount" required>
<button class="btn btn-warning">Withdraw</button>
</div>
</form>

<a href="/delete_account/{{ account.id }}" class="btn btn-danger btn-sm mt-2">Delete</a>

<hr>
<h6>Transactions</h6>
<ul class="list-group small">
{% for t in account.transactions %}
<li class="list-group-item d-flex justify-content-between">
<span>{{ t.type }}</span>
<span>₹{{ t.amount }}</span>
</li>
{% endfor %}
</ul>

</div>
</div>
</div>
{% endfor %}
</div>
{% endblock %}
